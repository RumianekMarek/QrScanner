import{r as d,j as e,h,V as u,a as b}from"./app-CPZnGP4g.js";import{A as g}from"./AuthenticatedLayout-BwnobKaf.js";import{D as j}from"./DataComperer-COcZYqIw.js";import{P as y}from"./PrimaryButton-CtAVO4VB.js";import{T as f}from"./TextInput-CTcUtL2p.js";import"./transition-jJxcrHqb.js";function N({endpoint:s,method:a="post",data:n={},label:o="Kliknij",successLabel:l="Zrobione",color:c="blue"}){const[t,r]=d.useState(!1),[i,w]=d.useState(!1),x=()=>{t||i||(r(!0),h.visit(s,{method:a,data:n,preserveScroll:!0}))},m="flex items-center justify-center font-semibold rounded-lg transition-colors duration-150 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-70",p={blue:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",red:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500",green:"bg-green-600 hover:bg-green-700 text-white focus:ring-green-500",gray:"bg-gray-500 hover:bg-gray-600 text-white focus:ring-gray-400"};return e.jsx("button",{onClick:x,disabled:t||i,className:`${m} ${p[c]}`,children:t?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 100 16v-4l-3 3 3 3v-4a8 8 0 01-8-8z"})]}),"Przetwarzanie..."]}):i?l:o})}function T({fairs:s}){u();const{data:a,setData:n,post:o,processing:l}=b({domain:""}),c=t=>{t.preventDefault(),o(route("admin.fairs.store"))};return e.jsx(g,{children:e.jsxs("div",{className:"m-10",children:[e.jsx("form",{onSubmit:c,children:e.jsxs("div",{className:"flex flex-row w-2/6",children:[e.jsx(f,{id:"domain",name:"domain",placeholder:"Wpisz domenę targową",value:a.domain,className:"mt-1 block w-full w-4/6",autoComplete:"domain",onChange:t=>n("domain",t.target.value),required:!0}),e.jsx(y,{className:"ms-4 bg-green-500 hover:bg-green-800",disabled:l,children:"Dodaj Targi"})]})}),e.jsx("h1",{className:"text-xl font-bold mt-10 text-center",children:"Lista Targów"}),e.jsxs("table",{className:"table-auto w-full border-collapse border border-gray-300 mt-4",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-4 py-2 text-center",children:"ID"}),e.jsx("th",{className:"border px-4 py-2 text-center",children:"Nazwa Targów"}),e.jsx("th",{className:"border px-4 py-2 text-center",children:"Klucz meta"}),e.jsx("th",{className:"border px-4 py-2 text-center",children:"Domena"}),e.jsx("th",{className:"border px-4 py-2 text-center",children:"Data Targów"}),e.jsx("th",{className:"border px-4 py-2 text-center",children:"QR Detale"}),e.jsx("th",{className:"border px-4 py-2 text-center",children:"Status"}),e.jsx("th",{className:"border px-4 py-2 text-center",children:"Akcje"})]})}),e.jsx("tbody",{children:s.map(t=>e.jsxs("tr",{className:"align-center",children:[e.jsx("td",{className:"border px-4 py-2 text-center",children:t.id}),e.jsx("td",{className:"border px-4 py-2 text-center",children:t.fair_name}),e.jsx("td",{className:"border px-4 py-2 text-center",children:t.fair_meta}),e.jsx("td",{className:"border px-4 py-2 text-center",children:t.domain}),e.jsxs("td",{className:"border px-4 py-2 text-center",children:[t.fair_start," - ",t.fair_end]}),t.fair_end!==null&&t.qr_details.length>10?e.jsx("td",{className:"border px-4 py-2 text-center",children:"Wypełnione"}):e.jsx("td",{className:"border px-4 py-2 text-center",children:"Nie Wypełnione"}),e.jsx(j,{firstDate:t.fair_start,secondDate:t.fair_end}),Object.values(t).every(r=>r&&r.name!==null)?e.jsx("td",{className:"border px-4 py-2 text-center text-green-500",children:e.jsx(N,{endpoint:"/fair_update",data:{domain:t.domain},label:"Powtórz pobranie formularzy",color:"green"})}):e.jsx("td",{className:"border px-4 py-2 text-center text-red-500",children:"Brakuje Danych"})]},t.id))})]})]})})}export{T as default};
