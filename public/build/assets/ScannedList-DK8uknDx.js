import{V as l,r as a,j as e,M as S,h as b}from"./app-CYjuILJk.js";import{A}from"./AuthenticatedLayout-A-RPLwLw.js";import{P as u}from"./PrimaryButton-CzUneS36.js";import"./transition-BwY331Il.js";function z({scannerData:d}){const{props:n}=l(),{flash:j,message:i}=l().props,c=l().props.flash,f=l().props.auth.user,y=(d?d.split(";;"):[])??[],[N,o]=a.useState(!1),[g,h]=a.useState(null),[m,x]=a.useState(!0),w=async s=>{b.post(route("scanner.send"),{csvData:s})};a.useEffect(()=>{if(i){if(n.auth.user.email.length>30){const r=n.auth.user.email.split("@");r[0]+""+r[0]}let s=e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-center",children:i}),e.jsx("p",{className:"text-xl",children:n.auth.user.email})]});h(s),o(!0)}setTimeout(()=>{p()},5e3)},[j]);const v=s=>{m&&(b.post(route("scanner.download",{id:s})),x(!1),setTimeout(()=>{x(!0)},5e3))},p=()=>{o(null),h(!1)};return typeof c=="string"&&c.trim()!==""&&w(c),e.jsxs(A,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Lista skonawania"}),children:[e.jsx(S,{title:"Qr Skaner"}),e.jsx("div",{className:"float-right me-5",children:e.jsx(u,{onClick:()=>v(f.id),className:" bg-green-500 ps-8 pe-8 pt-2 pb-2 m-5 rounded",style:{fontSize:"20px"},disabled:!m,children:"Pobierz"})}),e.jsx("div",{className:"sm:m-5",children:e.jsxs("table",{className:"table-auto border-collapse border border-gray-300 mt-4 max-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-4 py-2 text-center hidden sm:table-cell",children:"ID"}),e.jsx("th",{className:"border px-4 py-2 text-center hidden sm:table-cell",children:"ImiÄ™"}),e.jsx("th",{className:"border px-4 py-2 text-center hidden sm:table-cell",children:"Firma"}),e.jsx("th",{className:"border px-4 py-2 text-center hidden sm:table-cell",children:"Email"}),e.jsx("th",{className:"border px-4 py-2 text-center hidden sm:table-cell",children:"Telefon"}),e.jsx("th",{className:"border px-4 py-2 text-center hidden sm:table-cell",children:"Kod QR"})]})}),e.jsx("tbody",{children:Object.entries(y).map(([s,r])=>{if(r.length<10)return null;const t=JSON.parse(r);return e.jsxs("tr",{className:"align-center",children:[e.jsx("td",{className:"border px-4 py-2 text-center hidden sm:table-cell",children:s}),e.jsx("td",{className:"border px-4 py-2 text-center hidden sm:table-cell",children:t.name}),e.jsx("td",{className:"border px-4 py-2 text-center hidden sm:table-cell",children:t.company}),e.jsx("td",{className:"border px-4 py-2 text-center hidden sm:table-cell",children:t.email}),e.jsx("td",{className:"border px-4 py-2 text-center hidden sm:table-cell",children:t.phone}),e.jsxs("td",{className:"border px-4 py-2 text-center ",children:[t.qrCode??"",e.jsxs("span",{className:"sm:hidden",children:[e.jsx("br",{}),t.email,e.jsx("br",{}),t.phone]})]})]},s)})})]})}),N&&e.jsx("div",{className:"popup-container fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center z-20",children:e.jsxs("div",{className:"popup-content bg-white p-6 rounded shadow-lg w-1/3 flex flex-col items-center min-w-80",children:[g,e.jsx(u,{className:"mt-10 bg-red-500 active:bg-red-900",onClick:p,children:"Close"})]})})]})}export{z as default};
