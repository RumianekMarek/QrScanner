import{V as a,r as c,j as e,M as b,h as N}from"./app-D_MHyhh1.js";import{A as g,N as y}from"./AuthenticatedLayout--Aqfzsj9.js";import{P as v}from"./PrimaryButton-aNeAvn1s.js";import"./transition-CGusiafW.js";function C({scannerData:l}){const{props:p}=a(),{flash:t}=a().props,n=a().props.flash,h=a().props.auth.user,m=(l?l.split(";;"):[])??[],[u,o]=c.useState(!1),[f,i]=c.useState(null),j=async s=>{N.post(route("scanner.send"),{csvData:s})};c.useEffect(()=>{if(t&&t.message){let s=e.jsxs("p",{className:"text-center",children:[t.message," ",e.jsx("br",{}),e.jsx("span",{className:"text-xl",children:p.auth.user.email})]});i(s),o(!0)}setTimeout(()=>{d()},5e3)},[t]);const d=()=>{o(null),i(!1)};return typeof n=="string"&&n.trim()!==""&&j(n),e.jsxs(g,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Lista skonawania"}),children:[e.jsx(b,{title:"Qr Skaner"}),e.jsx("div",{className:"float-right me-5",children:e.jsx(y,{href:route("scanner.download",{id:h.id}),active:route().current("scanner.download"),method:"post",className:" bg-green-300 text-xl ps-4 pe-4 pt-1 pb-1 m-5 rounded",children:"Pobierz"})}),e.jsx("div",{className:"m-5",children:e.jsxs("table",{className:"table-auto w-full border-collapse border border-gray-300 mt-4",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-4 py-2 text-center",children:"ID"}),e.jsx("th",{className:"border px-4 py-2 text-center",children:"ImiÄ™"}),e.jsx("th",{className:"border px-4 py-2 text-center",children:"Email"}),e.jsx("th",{className:"border px-4 py-2 text-center",children:"Telefon"}),e.jsx("th",{className:"border px-4 py-2 text-center",children:"Kod QR"})]})}),e.jsx("tbody",{children:Object.entries(m).map(([s,x])=>{if(x.length<10)return null;const r=JSON.parse(x);return e.jsxs("tr",{className:"align-center",children:[e.jsx("td",{className:"border px-4 py-2 text-center",children:s}),e.jsx("td",{className:"border px-4 py-2 text-center",children:r.name}),e.jsx("td",{className:"border px-4 py-2 text-center",children:r.email}),e.jsx("td",{className:"border px-4 py-2 text-center",children:r.phone}),e.jsx("td",{className:"border px-4 py-2 text-center",children:r.qrCode??""})]},s)})})]})}),u&&e.jsx("div",{className:"popup-container fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center z-20",children:e.jsxs("div",{className:"popup-content bg-white p-6 rounded shadow-lg w-1/3 flex flex-col items-center min-w-80",children:[f,e.jsx(v,{className:"mt-10 bg-red-500 active:bg-red-900",onClick:d,children:"Close"})]})})]})}export{C as default};
